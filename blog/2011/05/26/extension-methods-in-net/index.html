
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Extension Methods in .NET - Cheraq.com</title>
  <meta name="author" content="Mohammad J. Fathinia">

  
  <meta name="description" content="Sometimes, you need to add new methods to a type, for example, when you are developing a website, you need to use HttpUtility.HtmlEncode() function &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://mjfathinia.github.com/blog/2011/05/26/extension-methods-in-net">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Cheraq.com" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-4261034-3']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Cheraq.com</a></h1>
  
    <h2>I Innovate, Then I Am.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:mjfathinia.github.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Extension Methods in .NET</h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-05-26T16:19:00+04:00" pubdate data-updated="true">May 26<span>th</span>, 2011</time>
        
      </p>
    
  </header>


<div class="entry-content"><p>Sometimes, you need to add new methods to a type, for example, when you are developing a website, you need to use <code>HttpUtility.HtmlEncode()</code> function to encode html and then dump it to screen. For example if you have a class called <code>Post</code> and this class has a property called <code>PostTitle</code>, then you need to do like below:</p>

<pre><code>Post p = Post.LoadPost();
ltPostBody.Text = HttpUtility.HtmlEncode(p.PostTitle);
</code></pre>

<p>But if we have a method in string class that does this for us, then life will be easier and we could use something like below:</p>

<pre><code>ltPostBody.Text = p.PostTitle.HtmlEncode();
</code></pre>

<p>One way to do this is to modify the <code>Post</code> class and change the type of <code>PostTitle</code> to a derived type that has <code>HtmlEncode</code> method. But this is not a solution. What if you couldn&#8217;t modify the <code>Post</code> class? Or what if you couldn&#8217;t create new derived type because it is sealed by author. Or lots of other scenarios.</p>

<p>The simple solution is, using extension methods. What is it? <a href="http://msdn.microsoft.com/en-us/library/bb383977.aspx">MSDN</a> says:</p>

<blockquote><p>Extension methods enable you to &#8220;add&#8221; methods to existing types without creating a new derived type, recompiling, or otherwise modifying the original type.</p></blockquote>

<p>The advantage of extension methods are, they will be available on all objects derived from that type. So if you add an extension method to <code>string</code> class, then it will be available on all string objects. Let&#8217;s see how we will implement extension methods. Again <a href="http://msdn.microsoft.com/en-us/library/bb383977.aspx">MSDN</a> says:</p>

<blockquote><p>Extension methods are defined as static methods but are called by using instance method syntax. Their first parameter specifies which type the method operates on, and the parameter is preceded by the <code>this</code> modifier. Extension methods are only in scope when you explicitly import the namespace into your source code with a <code>using</code> directive.</p></blockquote>

<p>Let write our own extension method. First we will add new class as below:</p>

<pre><code>namespace Cheraq.Extensions
{
    public static class StringExtensions
    {
        // our methods will be defined here
    }
}
</code></pre>

<p>Now we will define our extension method:</p>

<pre><code>public static string HTMLEncode(this string phrase)
{
    return HttpUtility.HtmlEncode(phrase);
}
</code></pre>

<p>First of all, our method should be <code>static</code>. Also if you see the parameter, it is so strange. The first parameter should be defined as below:</p>

<pre><code>this type-that-you-want-to-add-extension-method-to-it parameter-name
</code></pre>

<p>After that we will define our implementation of the function. When we want to use the function, we need to add using directive to import the namespace. When you import the namespace, the extension method will be available for all object derived from that type. Below image shows our extension method on the auto-complete window. You can see the icon of the extension method is different.</p>

<p><img src="http://cheraq.com/wp-content/uploads/2011/05/ext-1.jpg" alt="HTMLEncode is an extension method, so it got a different icon." /></p>

<p>The usage of extension method is same as normal method of that type. You can even add extension method to sealed class. But this will not violate the principal of encapsulation, because extended methods cannot access private variable and methods in the type they are extending. Below you can find summary of some facts about extension methods:</p>

<ul>
<li>Extension methods can only access private variable and methods in the type they are extending!</li>
<li>You cannot use them to override methods of a class or interface</li>
<li>They have lower priority than instance methods defined in the type itself. In other words, compiler first looks into the instance methods; if did not find any method with same signature, then it will search in extension methods</li>
<li>Extension methods are brought into scope at the namespace level</li>
<li>If you do not have access to the code of the type that you are extending, then it is better to keep in mind that changes in that type might break the extension method</li>
</ul>

</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Mohammad J. Fathinia</span></span>

      








  


<time datetime="2011-05-26T16:19:00+04:00" pubdate data-updated="true">May 26<span>th</span>, 2011</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/csharp/'>csharp</a>, <a class='category' href='/blog/categories/tips/'>tips</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://mjfathinia.github.com/blog/2011/05/26/extension-methods-in-net/" data-via="mjfathinia" data-counturl="http://mjfathinia.github.com/blog/2011/05/26/extension-methods-in-net/" >Tweet</a>
  
  
  <div class="g-plusone" data-size="medium"></div>
  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false"></div>
  
</div>

    
    <p class="meta">
      
      
        <a class="basic-alignment right" href="/blog/2011/05/27/resolve-url-in-absence-of-page-object/" title="Next Post: Resolve URL in absence of Page Object">Resolve URL in absence of Page Object &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2011/07/05/algorithms-what-why-when-how/">Algorithms: What? Why? When? How?</a>
      </li>
    
      <li class="post">
        <a href="/blog/2011/05/27/resolve-url-in-absence-of-page-object/">Resolve URL in absence of Page Object</a>
      </li>
    
      <li class="post">
        <a href="/blog/2011/05/26/extension-methods-in-net/">Extension Methods in .NET</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/mjfathinia">@mjfathinia</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'mjfathinia',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>



<section class="googleplus">
  <h1>
    <a href="https://plus.google.com/mj.fathinia@gmail.com?rel=author">
      <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
      Google+
    </a>
  </h1>
</section>



  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Mohammad J. Fathinia -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'cheraqcom';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://mjfathinia.github.com/blog/2011/05/26/extension-methods-in-net/';
        var disqus_url = 'http://mjfathinia.github.com/blog/2011/05/26/extension-methods-in-net/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
